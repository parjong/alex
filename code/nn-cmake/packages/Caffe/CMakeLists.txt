file(GLOB CORE_SOURCES "${CaffeSource_DIR}/src/caffe/*.cpp" "${CaffeSource_DIR}/src/caffe/util/*.cpp")
file(GLOB LAYER_SOURCES "${CaffeSource_DIR}/src/caffe/layers/*.cpp")
file(GLOB SOLVER_SOURCES "${CaffeSource_DIR}/src/caffe/solvers/*.cpp")

add_library(caffe SHARED ${CORE_SOURCES} ${LAYER_SOURCES} ${SOLVER_SOURCES})
target_compile_definitions(caffe PUBLIC CPU_ONLY)
target_include_directories(caffe PUBLIC "${CaffeSource_DIR}/include")
target_include_directories(caffe PRIVATE ${Boost_INCLUDE_DIRS})
target_include_directories(caffe PRIVATE ${HDF5_INCLUDE_DIRS})
target_link_libraries(caffe caffeproto)
target_link_libraries(caffe glog)
target_link_libraries(caffe gflags)
target_link_libraries(caffe atlas)
target_link_libraries(caffe ${Boost_LIBRARIES})
target_link_libraries(caffe ${HDF5_LIBRARIES} ${HDF5_HL_LIBRARIES})
